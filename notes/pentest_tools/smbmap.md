# SMBMap / SMBCLient

## Common Uses

`smbmap -u user -p pass -H IP -s share`

## CC: Pen Test - Samba

smbmap is used to enumerate smb shares. It can also assist in running commands, downloading/uploading files, etc.
smbclient is used to connect directly to SMB shares to interact with them manually

[impacket](https://github.com/SecureAuthCorp/impacket) is very useful for enumerating Windows-based shares

### Questions - SMBMap

- How do you set the username to authenticate with? [`-u`]
- What about the password? [`-p`]
- How do you set the host? [`-H`]
- What flag runs a command on the server(assuming you have permissions that is)? [`-x`]
- How do you specify the share to enumerate? [`-s`]
- How do you set which domain to enumerate? [`-d`]
- What flag downloads a file? [`--download`]
- What about uploading one? [`--upload`]
- Given the username "admin", the password "password", and the ip "10.10.10.10", how would you run ipconfig on that machine [`smbmap -u admin -p password -H 10.10.10.10 -x ipconfig`]

### Questions - SMBClient

- How do you specify which domain(workgroup) to use when connecting to the host? [`-W`]
- How do you specify the ip address of the host? [`-I`]
- How do you run the command "ipconfig" on the target machine? [`-c ipconfig`]
- How do you specify the username to authenticate with? [`-u`]
- How do you specify the password to authenticate with? [`-p`]
- What flag is set to tell smbclient to not use a password? [`-N`]
- While in the interactive prompt, how would you download the file test, assuming it was in the current directory? [`get test`]
- In the interactive prompt, how would you upload your /etc/hosts file [`put /etc/hosts`]
