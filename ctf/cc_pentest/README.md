# CC: Pen Testing Room - Knowledge Check

Michael Bailey | 7/22/21

This is the last question in the room, where we have to find two flags. Went through it. Yep...

Started with an [nmap scan](./nmap/init.log)

While the scan was running, I checked if there was a website, and I found the default Apache page

I decided gobuster might be a good idea: [log](./gobuster/scan.log)

I also went through and did a scan in nikto: [log]()

gobuster found `/secret`, but it was just an empty page, might be usable?

Decided to scan for files under `/secret` with gobuster as well, no dice...

nmap initial scan showed only port 22 and 80 open, I'm a bit skeptical, so I'm rescanning for all ports, which is gonna take a hot minute...

Then, by surprise, gobuster found a `secret.txt`, which has a hash of some kind in it?

Decided to mess around with john to see if I can crack it, and it came back with `nyan:nyan`

```
â”Œâ”€â”€(kaliã‰¿kali)-[~/thm/ctf/cc_pentest/john]
â””â”€$ john secret.txt 
Warning: detected hash type "Raw-SHA1", but the string is also recognized as "Raw-SHA1-AxCrypt"
Use the "--format=Raw-SHA1-AxCrypt" option to force loading these as that type instead
Warning: detected hash type "Raw-SHA1", but the string is also recognized as "Raw-SHA1-Linkedin"
Use the "--format=Raw-SHA1-Linkedin" option to force loading these as that type instead
Warning: detected hash type "Raw-SHA1", but the string is also recognized as "ripemd-160"
Use the "--format=ripemd-160" option to force loading these as that type instead
Using default input encoding: UTF-8
Loaded 1 password hash (Raw-SHA1 [SHA1 128/128 SSE2 4x])
Warning: no OpenMP support for this hash type, consider --fork=4
Proceeding with single, rules:Single
Press 'q' or Ctrl-C to abort, almost any other key for status
Warning: Only 2 candidates buffered for the current salt, minimum 8 needed for performance.
nyan             (nyan)
1g 0:00:00:00 DONE 1/3 (2021-07-22 23:47) 50.00g/s 100.0p/s 100.0c/s 100.0C/s nyan..Nyan
Use the "--show --format=Raw-SHA1" options to display all of the cracked passwords reliably
Session completed
                                                                                                                                                                                            
â”Œâ”€â”€(kaliã‰¿kali)-[~/thm/ctf/cc_pentest/john]
â””â”€$ john --show --format=Raw-SHA1 secret.txt 
nyan:nyan

1 password hash cracked, 0 left
```

I ssh'd in as `nyan`, not in the sudoers ðŸ˜¦

```
nyan@ubuntu:~$ id
uid=1000(nyan) gid=1000(nyan) groups=1000(nyan),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),114(lpadmin),115(sambashare)
nyan@ubuntu:~$ ls
user.txt
nyan@ubuntu:~$ cat user.txt
supernootnoot
```

**Q1: What is the user.txt?** [`supernootnoot`]

Though, it seems that there is a samba situation going on, though I have no idea which port, and `netstat` (thanks Google) says I need to be root to see all the ports that are in use.

I decided to just try smbmap to see if I get lucky, no dice

I then did a full port scan, and nothing. Nothing else open

I then poked around the system, and I found nyan's .bash_history file, where they ran `sudo su`

Low and behold, I ran it and I was root. I then went to the `/root` dir

**Q2: What is the root.txt?** [`congratulations!!!!`]
